<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Army GD Quiz</title>
<style>
/* CSS ‡§µ‡§π‡•Ä ‡§ú‡•ã ‡§Ü‡§™‡§®‡•á ‡§™‡§π‡§≤‡•á use ‡§ï‡§ø‡§Ø‡§æ ‡§•‡§æ */
body{margin:0; background:#0d1b2a; font-family:Arial,sans-serif; color:white; display:flex; justify-content:center; align-items:center; height:100vh;}
.quiz-box{width:90%; max-width:500px; background:#1b263b; padding:25px; border-radius:15px; box-shadow:0 0 20px #000;}
.question{font-size:20px; margin-bottom:20px; line-height:25px;}
.option{padding:12px; background:#415a77; margin:10px 0; border-radius:10px; cursor:pointer; transition:0.3s;}
.option:hover{background:#778da9;}
.btn{margin-top:20px; padding:12px; width:100%; border:none; border-radius:10px; background:#e63946; color:white; font-size:18px; cursor:pointer; display:none;}
#progress{text-align:center; margin-bottom:10px; font-size:16px;}
</style>
</head>
<body>

<div class="quiz-box">
    <div id="progress"></div>
    <div id="questionBox" class="question"></div>
    <div id="options"></div>
    <button id="nextBtn" class="btn" onclick="nextQuestion()">Next</button>
</div>

<script>
let quiz = [];
let index = 0;
let score = 0;

// **Step 3a: SheetDB API URL ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç**
const API_URL = "https://sheetdb.io/api/v1/11r17ar760ju7";

// **Step 3b: Quiz data fetch ‡§ï‡§∞‡§®‡§æ**
async function loadQuizData(){
    try{
        const res = await fetch(API_URL);
        const data = await res.json();

        // SheetDB ‡§ï‡§æ JSON ‡§ï‡•ã quiz format ‡§Æ‡•á‡§Ç convert ‡§ï‡§∞‡•á‡§Ç
        quiz = data.map(q => ({
            q: q.Q,
            o: [q.Option1, q.Option2, q.Option3, q.Option4],
            a: parseInt(q.Answer) - 1  // JS ‡§Æ‡•á‡§Ç index 0 ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§§‡§æ ‡§π‡•à
        }));

        loadQuestion();
    } catch(err){
        console.error(err);
        document.querySelector(".quiz-box").innerHTML = "<p>Questions load ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§è‡•§</p>";
    }
}

// Step 3c: Quiz functions (‡§™‡§π‡§≤‡•á ‡§µ‡§æ‡§≤‡•á JS ‡§ú‡•à‡§∏‡•á)
function loadQuestion(){
    document.getElementById("progress").innerHTML = `‡§™‡•ç‡§∞‡§∂‡•ç‡§®: ${index+1} / ${quiz.length}`;
    const data = quiz[index];
    document.getElementById("questionBox").innerHTML = data.q;

    let optionsHTML = "";
    for(let i=0; i<data.o.length; i++){
        optionsHTML += `<div class="option" onclick="selectOption(${i})">${data.o[i]}</div>`;
    }
    document.getElementById("options").innerHTML = optionsHTML;
}

function selectOption(selected){
    const correct = quiz[index].a;
    if(selected === correct) score++;

    const optionBtns = document.querySelectorAll(".option");
    optionBtns.forEach((btn, i)=>{
        btn.style.pointerEvents="none";
        if(i === correct) btn.style.background="#2ecc71";
        else if(i === selected) btn.style.background="#e63946";
    });

    document.getElementById("nextBtn").style.display="block";
}

function nextQuestion(){
    index++;
    if(index === quiz.length) return showResult();
    document.getElementById("nextBtn").style.display="none";
    loadQuestion();
}

function showResult(){
    document.querySelector(".quiz-box").innerHTML = `
        <h2 style="text-align:center;">‡§Ü‡§™‡§ï‡§æ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ</h2>
        <h1 style="text-align:center; font-size:40px;">${score} / ${quiz.length}</h1>
        <p style="text-align:center; margin-top:20px;">‡§¨‡§π‡•Å‡§§ ‡§¨‡§¢‡§º‡§ø‡§Ø‡§æ! üéâ</p>
    `;
}

loadQuizData();
</script>

</body>
</html>